extends layout

block header
  link(rel='stylesheet', href='/stylesheets/goods-new.css')

block content
  .container
    .jumbotron.jumbotron-transparent
      h1.titre Nouvelle annonce
    br

    .card.box-shadow
      .card-body
        if errors
          for err in errors
            .alert.alert-danger #{err.msg}
        if successMessage
          .alert.alert-success #{successMessage}

        form(action='/goods/new' method='post'
             enctype="multipart/form-data")
          .form-group.row
            label.col-lg-3.col-form-label Titre de l'annonce
            .col-lg-9
              input.form-control(name="title", type="text"
                                 placeholder="Titre de l'annonce"
                                 value=body.title)
          .form-group.row
             .form-check.form-check-inline.mar10.decright
               input.form-check-input(name="hebergement" type="checkbox" id="inlineCheckbox1" value="1")
               label.form-check-label(for="inlineCheckbox1") Hébergement
             .form-check.form-check-inline.mar10
               input.form-check-input(name="echange" type="checkbox" id="inlineCheckbox2" value="1")
               label.form-check-label(for="inlineCheckbox2") Echange
             .form-check.form-check-inline.mar10
               input.form-check-input(name="location" type="checkbox" id="inlineCheckbox3" value="1")
               label.form-check-label(for="inlineCheckbox3") Location
          .form-group.row
            label.col-lg-3.col-form-label Description
            .col-lg-9
              textarea.form-control(name="description" type="text"
                                    placeholder="Description")
              | #{body.description}
          .form-group.row
            .form-check.form-check-inline.mar10.decright
              input.form-check-input(name="pool" type="checkbox" id="inlineCheckbox1" value="1")
              label.form-check-label(for="inlineCheckbox1") Piscine
            .form-check.form-check-inline.mar10
              input.form-check-input(name="garden" type="checkbox" id="inlineCheckbox2" value="1")
              label.form-check-label(for="inlineCheckbox2") Jardin
            .form-check.form-check-inline.mar10
              input.form-check-input(name="citycenter" type="checkbox" id="inlineCheckbox3" value="1")
              label.form-check-label(for="inlineCheckbox3") Centre-Ville
          .form-group.row
            label.col-lg-3.col-form-label Nombre de personnes
            .col-lg-2
              .input-group
                input.form-control(name="nbpeople", type="text" placeholder="1")

          .form-group.row
            label.col-lg-3.col-form-label Prix par nuit
            .col-lg-2
              .input-group
                input.form-control(name="price" type="text"
                                   placeholder="Prix" value=body.price)
                if echange
                  price = 0;
                if hebergement
                  price = 0;
                .input-group-append
                  span.input-group-text €
          .form-group.row
            label.col-lg-3.col-form-label Région
            .col-lg-4
              input.form-control(name="region", type="text" placeholder="Région")
          .form-group.row
            label.col-lg-3.col-form-label Département
            .col-lg-4
              input.form-control(name="department", type="text"
                                 placeholder="Département" value=body.department)
          .form-group.row
            label.col-lg-3.col-form-label Ville
            .col-lg-4
              input.form-control(name="city" type="text"
                                 placeholder="Ville" value=body.city)
          .form-group.row
            label.col-lg-3.col-form-label Code postal
            .col-lg-4
              input.form-control(name="postcode" type="text"
                                 placeholder="Code postal" value=body.postcode)
          .form-group.row
            label.col-lg-3.col-form-label Adresse
            .col-lg-4
              input.form-control(name="address" type="text"
                                 placeholder="Adresse" value=body.address)
          .form-group.row
            label.col-lg-3.col-form-label Disponible du
            .col-lg-4
              .input-group.date
                input.form-control(name="from" type="date"
                                   value=body.from)
            label.col-lg-1.col-form-label au
            .col-lg-4
              .input-group.date
                input.form-control(name="to" type="date" value=body.to)

          br
          .form-group.row.col-lg-4
            | Images

          .form-group.row
            .col-lg-4
              .image-upload
                label(for='file')
                  img#preview0(src="/images/icons/icon-add.png")
                input#file(type='file' name='image1' onchange='updatePreview(this);'
                           preview="preview0" accept="image/gif, image/jpeg, image/png")

            .col-lg-4
              .image-upload
                label(for='file1')
                  img#preview1(src="/images/icons/icon-add.png")
                input#file1(type='file' name='image2' onchange='updatePreview(this);'
                           preview="preview1" accept="image/gif, image/jpeg, image/png")

            .col-lg-4
              .image-upload
                label(for='file2')
                  img#preview2(src="/images/icons/icon-add.png")
                input#file2(type='file' name='image3' onchange='updatePreview(this);'
                           preview="preview2" accept="image/gif, image/jpeg, image/png")
          button.form-control.btn.btn-success(type="submit") Déposer

block scripts
  script(src="/js/goods.js")
